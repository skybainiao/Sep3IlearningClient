@page "/Notice"
@using LoginExample.Data
@using LoginExample.Data.Impl
@using LoginExample.Models
@using System.Diagnostics
@inject IUserService _service;

<hr style=" border: 2px solid white" />
<br>
<div class="notice" style="position: fixed; display: flex; flex-direction: row; width: 100%; height: 80%">
        <div style="flex-direction: column; display: flex; text-align: center; top: 0; bottom: 0; left: 0; right: 0; margin: auto">
                <ul style="list-style-type: none">
                        <li><button @onclick="getMessage" class="notice-button1">Message box</button></li>
                        <li><button @onclick="getRequest" class="notice-button1" style="margin-top: 20%">Friend request</button></li>
                        <li><button @onclick="getAnnouncement" class="notice-button1" style="margin-top: 20%">Announcement</button></li>
                </ul>
        </div>
        <div class="notice-text" style="position: relative; width: 100%; height: 100%; background-color: rgba(255,255,255,0.7); color: black; margin-left: 5%; margin-right: 5%; margin-bottom: 3%">
                @if (type.Equals("Message"))
                {
                        <table class="table table-striped" style="width: 100%;">
                                <thead>
                                <tr style="text-align: center">
                                        <th><span>Username</span></th>
                                        <th><span>Message</span></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                 </tr>
                                </tbody>
                        </table>
                }
                else if (type.Equals("Request"))
                {
                        <table class="table table-striped" style="width: 100%">
                                <thead>
                                <tr style="text-align: center">
                                        <th><span>Name(Username)</span></th>
                                        <th><span>Comment(System)</span></th>
                                        <th><span>Request</span></th>
                                        <th><span>Refuse</span></th>
                                        <th><span>Information</span></th>
                                </tr>
                                </thead>
                                <tbody>
                                @foreach (var request in _requests)
                                {
                                        <tr style="text-align: center">
                                                <td><span style="font-weight: bolder; font-size: 2vw;">@request.sender</span></td>
                                                <td><span style="font-weight: bolder; font-size: 2vw;">@request.comment</span></td>
                                                <td><button class="notice-button2"><img src="css/image/GreenBingo.png" width="30%" height="30%"></button></td>
                                                <td><button class="notice-button2"><img src="css/image/RedCross.png" width="30%" height="30%"></button></td>
                                                <td><button class="notice-button2"><img src="css/image/BlueInformation.png" width="30%" height="30%"></button></td>
                                        </tr>
                                }
                                </tbody>
                        </table>
                }
                else if (type.Equals("Announcement"))
                {
                        
                }

        </div>
</div>


@code
{
        private String type = "";
        private UserData _userData = new UserDataService();
        private IList<Request> _requests = new List<Request>();
        private IList<Message> _messages = new List<Message>();

        protected override async Task OnInitializedAsync()
        {
                _requests = await _userData.getRequest(_service.getName());
        }


        public void getRequest()
        {
              type = "Request";  
        }


        public void getMessage()
        {
                type = "Message";
        }


        public void getAnnouncement()
        {
                type = "Announcement";
        }


}
